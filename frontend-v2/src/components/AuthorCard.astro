---
import type { Author } from '../types';
import { getStrapiMedia } from '../lib/strapi';

export interface Props {
  author: Author;
}

const { author } = Astro.props;
const authorName = author.name ?? 'Unknown author';
const authorImage = getStrapiMedia(author.avatar?.url);
---

<article class="group p-4 flex flex-col items-center rounded-sm border border-zinc-200 bg-white text-center transition hover:shadow-lg">
  <img
    src={authorImage ?? 'https://via.placeholder.com/96x96?text=No+Image'}
    alt={authorName}
    class="h-32 w-32 rounded-full bg-zinc-100 object-cover"
    loading="lazy"
  />

  <div class="mt-2">
    <a href={`/authors/${author?.id}`}>
      <h3 class="text-lg font-semibold text-[#2B6CB0] group-hover:underline">
        {authorName}
      </h3>
    </a>
    <p class="text-sm text-zinc-500">{author.stories?.length || 0} stories</p>
    <div class="mt-2 flex justify-center gap-3">
      {author.x && (
        <a href={author.x} target="_blank" rel="noopener noreferrer" aria-label="X (formerly Twitter)">
          <img src="/social/x.svg" alt="X" class="h-4 w-4" />
        </a>
      )}
      {author.instagram && (
        <a href={author.instagram} target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <img src="/social/instagram.svg" alt="Instagram" class="h-4 w-4" />
        </a>
      )}
      {author.linkedin && (
        <a href={author.linkedin} target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
          <img src="/social/linkedin.svg" alt="LinkedIn" class="h-4 w-4" />
        </a>
      )}
    </div>
  </div>
</article>
